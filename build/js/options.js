!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VkRnmExt=t():e.VkRnmExt=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="build",t(t.s=3)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DEFAULT_RENAMES={geexup:"God"}},,,function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0);new(function(){function e(){n(this,e),this.renameList=[],this.addList=[],this.listElement=document.querySelector(".list"),this.addListElement=document.querySelector(".addingList"),this.addBtn=document.querySelector(".addUser"),this.saveBtn=document.querySelector(".save"),this.init()}return i(e,[{key:"init",value:function(){var e=this;null===localStorage.getItem("RENAMES_OBJECT")&&localStorage.setItem("RENAMES_OBJECT",JSON.stringify(a.DEFAULT_RENAMES)),console.log("[Rename] Options page"),this.renameList=this.makeList(JSON.parse(localStorage.getItem("RENAMES_OBJECT"))||a.DEFAULT_RENAMES),this.addBtn.addEventListener("click",function(){return e.addUser()}),this.saveBtn.addEventListener("click",function(){return e.save()}),console.log(this.renameList),this.render()}},{key:"render",value:function(){var e=this,t="",r="";this.listElement.innerHTML="",this.addListElement.innerHTML="";var n=!0,i=!1,a=void 0;try{for(var s,o=this.renameList[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;t+=function(e,t){return'<div class="user"><span class="userId">'+e+'</span><span class="rename">'+t+'</span><div class="delete">Delete</div></div>'}(l.key,l.value)}}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}var u=!0,c=!1,d=void 0;try{for(var f,m=this.addList[Symbol.iterator]();!(u=(f=m.next()).done);u=!0){var v=f.value;r+=function(e,t){return'<div class="user"><input name="userId" class="userId" value="'+e+'" placeholder="user id"></input><input name="rename" class="rename" value="'+t+'" placeholder="new name"></input></div>'}(v.key,v.value)}}catch(e){c=!0,d=e}finally{try{!u&&m.return&&m.return()}finally{if(c)throw d}}this.listElement.innerHTML=t,this.addListElement.innerHTML=r,Array.from(this.listElement.querySelectorAll(".user")).forEach(function(t,r){t.addEventListener("click",function(){return e.edit(r)})}),Array.from(this.listElement.querySelectorAll(".user .delete")).forEach(function(t,r){t.addEventListener("click",function(t){t.stopPropagation(),confirm("Delete '"+e.renameList[r].key+"' -> '"+e.renameList[r].value+"'?")&&(e.renameList.splice(r,1),localStorage.setItem("RENAMES_OBJECT",JSON.stringify(e.makeObjectFromList(e.renameList))),e.render())})}),console.log("[Rename] Re-rendered")}},{key:"makeList",value:function(e){var t=[];for(var r in e)t.push({key:r,value:e[r]});return t}},{key:"makeObjectFromList",value:function(e){var t={},r=!0,n=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var o=a.value;t[o.key]=o.value}}catch(e){n=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}return t}},{key:"bindHtmlAddListToObj",value:function(){for(var e=Array.from(this.addListElement.querySelectorAll(".user")),t=0;t<e.length;t++){var r=e[t],n=r.querySelector("[name=userId]").value,i=r.querySelector("[name=rename]").value;this.addList[t]={key:n,value:i}}}},{key:"addUser",value:function(){this.bindHtmlAddListToObj(),this.addList.push({key:"",value:""}),this.render()}},{key:"edit",value:function(e){var t=this.renameList[e],r=prompt("New name?",t.value);null!==r&&(this.renameList[e].value=r,localStorage.setItem("RENAMES_OBJECT",JSON.stringify(this.makeObjectFromList(this.renameList))),this.render())}},{key:"save",value:function(){this.bindHtmlAddListToObj();var e=Object.keys(this.makeObjectFromList(this.renameList)),t=!0,r=!1,n=void 0;try{for(var i,a=this.addList[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;s.key=s.key.replace(/\//,"").toLowerCase(),s.key.length>0&&s.value.length>0&&!e.includes(s.key)&&this.renameList.push(Object.assign({},s))}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}this.addList=[],localStorage.setItem("RENAMES_OBJECT",JSON.stringify(this.makeObjectFromList(this.renameList))),this.render()}}]),e}())}])});